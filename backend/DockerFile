# Используем официальный Node.js образ

FROM node:20

# Устанавливаем рабочую директорию внутри контейнера

WORKDIR /app

# Копируем package.json и package-lock.json для уставки зависимсотей

# Используем шаблон *, чтобы избежать повторения

COPY package*.json ./

# Устанавливаем зависимости

RUN npm install

# Копируем весь проект в рабочую директорию контейнера

COPY . .

#  Открываем порт 3005 (например, для WebSocket, отладки, других микросервисов)

EXPOSE 3005

# Открываем порт 3000 - основной порт

EXPOSE 3000

# Указываем команду, которая будет запущена при старте контейнера

# npm run dev должен быть опеределен в package.json

CMD [ "npm", "run", "dev" ]